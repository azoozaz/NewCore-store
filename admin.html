
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>لوحة تحكم الزوار</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <style>
    body {
      background: #0e0e0e;
      color: white;
      font-family: sans-serif;
      margin: 0;
      padding: 30px;
    }
    h1 {
      text-align: center;
      color: #00ffd5;
    }
    ul {
      list-style: none;
      padding: 0;
      max-width: 700px;
      margin: auto;
    }
    li {
      background: #1c1c1c;
      margin-bottom: 10px;
      padding: 15px;
      border-radius: 6px;
      position: relative;
    }
    button {
      position: absolute;
      left: 10px;
      top: 10px;
      background: #ff4444;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>👥 قائمة الزوار (Firestore)</h1>
  <ul id="visitorList">جاري التحميل...</ul>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBlQRe187CdxcxVKfA99-v1oQtd9il6E4U",
      authDomain: "projectazo-49c65.firebaseapp.com",
      projectId: "projectazo-49c65"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const list = document.getElementById("visitorList");

    function loadVisitors() {
      list.innerHTML = "";
      db.collection("visitors").get().then(snapshot => {
        if (snapshot.empty) {
          list.innerHTML = "<li>لا يوجد زوار بعد</li>";
          return;
        }
        snapshot.forEach(doc => {
          const v = doc.data();
          const li = document.createElement("li");
          li.innerHTML = `👤 <strong>${v.name}</strong><br>📞 ${v.phone}<br>📧 ${v.email}<br>🕒 ${v.time}
            <button onclick="deleteVisitor('${doc.id}')">✖ حذف</button>`;
          list.appendChild(li);
        });
      });
    }

    function deleteVisitor(id) {
      if (!confirm("هل أنت متأكد من حذف هذا الزائر؟")) return;
      db.collection("visitors").doc(id).delete().then(loadVisitors);
    }

    loadVisitors();
  </script>
</body>
</html>
